<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chentianming11.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":{"enable":true,"onlypost":false,"loadingImg":"/uploads/loading.gif"},"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Spring MVCæ˜¯å½“å‰webåº”ç”¨ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æ¡†æ¶ï¼Œæœ¬æ–‡å°†ä¼šä»æºç è§’åº¦è¯¦ç»†åˆ†æSpring MVCå®ç°åŸç†ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Springæºç é˜…è¯»ã€‘MVCå®ç°åŸç†">
<meta property="og:url" content="https://chentianming11.github.io/posts/3374948667/index.html">
<meta property="og:site_name" content="é™ˆæ·»æ˜">
<meta property="og:description" content="Spring MVCæ˜¯å½“å‰webåº”ç”¨ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æ¡†æ¶ï¼Œæœ¬æ–‡å°†ä¼šä»æºç è§’åº¦è¯¦ç»†åˆ†æSpring MVCå®ç°åŸç†ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/mvc-all.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/DispatcherServlet.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/HttpServletBean-init.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-initServletBean.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-initWebApplicationContext.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-configureAndRefreshWebApplicationContext.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/AbstractApplicationContext-refresh.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/AbstractApplicationContext-refresh2.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/ioc/DispatcherServlet-onRefresh.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/DispatcherServlet-doDispatch.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/DispatcherServlet-getHandler.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerMapping.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMethodMapping-initHandlerMethods.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMapping-getHandler.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMapping-getHandlerExecutionChain.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerAdapter-handleInternal.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerAdapter-invokeHandlerMethod.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/ServletInvocableHandlerMethod-invokeAndHandle.png">
<meta property="og:image" content="https://chentianming11.github.io/images/spring/mvc/RequestResponseBodyMethodProcessor-handleReturnValue.png">
<meta property="article:published_time" content="2021-07-03T03:03:52.000Z">
<meta property="article:modified_time" content="2021-07-03T09:44:40.672Z">
<meta property="article:author" content="é™ˆæ·»æ˜">
<meta property="article:tag" content="spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chentianming11.github.io/images/spring/mvc/mvc-all.png">

<link rel="canonical" href="https://chentianming11.github.io/posts/3374948667/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ã€Springæºç é˜…è¯»ã€‘MVCå®ç°åŸç† | é™ˆæ·»æ˜</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">é™ˆæ·»æ˜</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">å¿ƒå®‰å³æ˜¯å½’å¤„</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">8</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">46</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/chentianming11" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://chentianming11.github.io/posts/3374948667/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="é™ˆæ·»æ˜">
      <meta itemprop="description" content="ç”Ÿå‘½çš„æ„ä¹‰åœ¨äºæˆä¸ºä½ è‡ªå·±">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é™ˆæ·»æ˜">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ã€Springæºç é˜…è¯»ã€‘MVCå®ç°åŸç†
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-03 11:03:52" itemprop="dateCreated datePublished" datetime="2021-07-03T11:03:52+08:00">2021-07-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/posts/3374948667/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/posts/3374948667/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>5.7k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>14 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Spring MVCæ˜¯å½“å‰webåº”ç”¨ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„æ¡†æ¶ï¼Œæœ¬æ–‡å°†ä¼šä»æºç è§’åº¦è¯¦ç»†åˆ†æSpring MVCå®ç°åŸç†ã€‚</p>
<a id="more"></a>

<h2 id="Spring-MVCåŸºæœ¬æµç¨‹"><a href="#Spring-MVCåŸºæœ¬æµç¨‹" class="headerlink" title="Spring MVCåŸºæœ¬æµç¨‹"></a>Spring MVCåŸºæœ¬æµç¨‹</h2><p>åœ¨å…·ä½“è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»å®è§‚ä¸Šç®€å•ä»‹ç»Spring MVCçš„å¤„ç†æµç¨‹ï¼Œäº†è§£ç”¨æˆ·ä»å‘èµ·è¯·æ±‚åˆ°è·å¾—å“åº”çš„å®Œæ•´æµç¨‹ã€‚</p>
<p><img data-src="https://chentianming11.github.io/images/spring/mvc/mvc-all.png" alt="mvc-all"></p>
<p>æµç¨‹ç®€ä»‹ï¼š</p>
<ol>
<li><p>ç”¨æˆ·å‘èµ·è¯·æ±‚åˆ°<code>DispatcherServlet</code>ï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰</p>
</li>
<li><p><code>DispatcherServlet</code>é€šè¿‡<code>HandlerMapping</code>ï¼ˆå¤„ç†æ˜ å°„å™¨ï¼‰å¯»æ‰¾ç”¨æˆ·è¦è¯·æ±‚çš„<code>Handler</code></p>
</li>
<li><p><code>HandlerMapping</code>è¿”å›æ‰§è¡Œé“¾ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†å†…å®¹ï¼š</p>
<ol>
<li>å¤„ç†å™¨å¯¹è±¡ï¼š<code>Handler</code></li>
<li><code>HandlerInterceptor</code>ï¼ˆæ‹¦æˆªå™¨ï¼‰çš„é›†åˆ</li>
</ol>
</li>
<li><p>å‰ç«¯æ§åˆ¶å™¨é€šè¿‡<code>HandlerAdapter</code>ï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰å¯¹<code>Handler</code>è¿›è¡Œé€‚é…åŒ…è£…</p>
</li>
<li><p>è°ƒç”¨åŒ…è£…åçš„<code>Handler</code>ä¸­çš„æ–¹æ³•ï¼Œå¤„ç†ä¸šåŠ¡</p>
</li>
<li><p>å¤„ç†ä¸šåŠ¡å®Œæˆï¼Œè¿”å›<code>ModelAndView</code>å¯¹è±¡ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†</p>
<ol>
<li><code>Model</code>ï¼šæ¨¡å‹æ•°æ®</li>
<li><code>View</code>ï¼šè§†å›¾åç§°ï¼Œä¸æ˜¯çœŸæ­£çš„è§†å›¾</li>
</ol>
</li>
<li><p><code>DispatcherServlet</code>è·å–å¤„ç†å¾—åˆ°çš„<code>ModelAndView</code>å¯¹è±¡</p>
</li>
<li><p><code>DispatcherServlet</code>å°†è§†å›¾åç§°äº¤ç»™<code>ViewResolver</code>ï¼ˆè§†å›¾è§£æå™¨ï¼‰ï¼ŒæŸ¥æ‰¾è§†å›¾</p>
</li>
<li><p><code>ViewResolver</code>è¿”å›çœŸæ­£çš„è§†å›¾å¯¹è±¡ç»™<code>DispatcherServlet</code></p>
</li>
<li><p><code>DispatcherServlet</code>æŠŠ<code>Model</code>ï¼ˆæ•°æ®æ¨¡å‹ï¼‰äº¤ç»™è§†å›¾å¯¹è±¡è¿›è¡Œæ¸²æŸ“</p>
</li>
<li><p>è¿”å›æ¸²æŸ“åçš„è§†å›¾</p>
</li>
<li><p>å°†æœ€ç»ˆçš„è§†å›¾è¿”å›ç”¨æˆ·ï¼Œäº§ç”Ÿå“åº”</p>
</li>
</ol>
<h2 id="Spring-MVCä¹å¤§ç»„ä»¶"><a href="#Spring-MVCä¹å¤§ç»„ä»¶" class="headerlink" title="Spring MVCä¹å¤§ç»„ä»¶"></a>Spring MVCä¹å¤§ç»„ä»¶</h2><h3 id="HandlerMapping"><a href="#HandlerMapping" class="headerlink" title="HandlerMapping"></a>HandlerMapping</h3><p><code>HandlerMapping</code>æ˜¯ç”¨æ¥æŸ¥æ‰¾<code>Handler</code>çš„ï¼Œä¹Ÿå°±æ˜¯å¤„ç†å™¨ï¼Œå…·ä½“è¡¨ç°å½¢å¼å¯ä»¥æ˜¯ç±»ä¹Ÿ å¯ä»¥æ˜¯æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œæ ‡æ³¨äº†<code>@RequestMapping</code>çš„æ¯ä¸ª<code>method</code>éƒ½å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª<code>Handler</code>ï¼Œç”±<code>Handler</code>æ¥è´Ÿè´£å®é™…çš„è¯·æ±‚å¤„ç†ã€‚<code>HandlerMapping</code>åœ¨è¯·æ±‚åˆ°è¾¾ä¹‹åï¼Œ å®ƒçš„ä½œç”¨ä¾¿æ˜¯æ‰¾åˆ°è¯·æ±‚ç›¸åº”çš„å¤„ç†å™¨<code>Handler</code>å’Œ<code>Interceptors</code>ã€‚</p>
<h3 id="HandlerAdapter"><a href="#HandlerAdapter" class="headerlink" title="HandlerAdapter"></a>HandlerAdapter</h3><p>ä»åå­—ä¸Šçœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚å› ä¸ºSpring MVCä¸­<code>Handler</code>å¯ä»¥æ˜¯ä»»æ„å½¢å¼çš„ï¼Œåªè¦èƒ½å¤Ÿå¤„ç†è¯·æ±‚å°±è¡Œã€‚ä½†æ˜¯æŠŠè¯·æ±‚äº¤ç»™ <code>Servlet</code>çš„æ—¶å€™ï¼Œç”±äº<code>Servlet</code>çš„æ–¹æ³•ç»“æ„éƒ½æ˜¯å¦‚<code>doService(HttpServletRequest req, HttpServletResponse resp)</code>è¿™æ ·çš„å½¢å¼ï¼Œè®©å›ºå®šçš„<code>Servlet</code>å¤„ç†æ–¹æ³•è°ƒç”¨<code>Handler</code>æ¥è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸€æ­¥å·¥ä½œä¾¿æ˜¯<code>HandlerAdapter</code>è¦åšçš„äº‹ã€‚</p>
<h3 id="HandlerExceptionResolver"><a href="#HandlerExceptionResolver" class="headerlink" title="HandlerExceptionResolver"></a>HandlerExceptionResolver</h3><p>ä»è¿™ä¸ªç»„ä»¶çš„åå­—ä¸Šçœ‹ï¼Œè¿™ä¸ªå°±æ˜¯ç”¨æ¥å¤„ç†<code>Handler</code>è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¼‚å¸¸æƒ…å†µçš„ç»„ä»¶ã€‚ å…·ä½“æ¥è¯´ï¼Œæ­¤ç»„ä»¶çš„ä½œç”¨æ˜¯æ ¹æ®å¼‚å¸¸è®¾ç½® <code>ModelAndView</code>, ä¹‹åå†äº¤ç»™<code>render()</code>æ–¹æ³•è¿›è¡Œæ¸²æŸ“ï¼Œè€Œ<code>render()</code>ä¾¿å°†<code>ModelAndView</code>æ¸²æŸ“æˆé¡µé¢ã€‚ ä¸è¿‡æœ‰ä¸€ç‚¹ï¼Œ<code>HandlerExceptionResolver</code>åªæ˜¯ç”¨äºè§£æå¯¹è¯·æ±‚åšå¤„ç†é˜¶æ®µäº§ç”Ÿçš„å¼‚å¸¸ï¼Œè€Œæ¸²æŸ“é˜¶æ®µçš„å¼‚å¸¸åˆ™ä¸å½’ä»–ç®¡äº†ï¼Œè¿™ä¹Ÿæ˜¯Spring MVCç»„ä»¶è®¾è®¡çš„ä¸€å¤§åŸåˆ™ï¼ˆåˆ†å·¥æ˜ç¡®äº’ä¸å¹²æ¶‰ï¼‰ã€‚</p>
<h3 id="ViewResolver"><a href="#ViewResolver" class="headerlink" title="ViewResolver"></a>ViewResolver</h3><p>è§†å›¾è§£æå™¨ï¼Œç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸ªåº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰äº†ã€‚å› ä¸ºé€šå¸¸åœ¨Spring MVCçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œ éƒ½ä¼šé…ä¸Šä¸€ä¸ªè¯¥æ¥å£çš„å®ç°ç±»æ¥è¿›è¡Œè§†å›¾çš„è§£æã€‚ è¿™ä¸ªç»„ä»¶çš„ä¸»è¦ä½œç”¨ï¼Œä¾¿æ˜¯å°†<code>String</code>ç±»å‹çš„è§†å›¾åå’Œ<code>Locale</code>è§£æä¸º<code>View</code>ç±»å‹çš„è§†å›¾ã€‚è¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ª <code>resolveViewName()</code>æ–¹æ³•ã€‚ä»æ–¹æ³•çš„å®šä¹‰å°±å¯ä»¥çœ‹å‡ºï¼Œ<code>Controller</code>å±‚è¿”å›çš„<code>String</code>ç±»å‹çš„è§†å›¾å<code>viewName</code>ï¼Œ æœ€ç»ˆä¼šåœ¨è¿™é‡Œè¢«è§£ææˆä¸º<code>View</code>ã€‚<code>View</code>æ˜¯ç”¨æ¥æ¸²æŸ“é¡µé¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šå°†ç¨‹åºè¿”å›çš„å‚æ•°å’Œæ•°æ®å¡«å…¥æ¨¡æ¿ä¸­ï¼Œæœ€ç»ˆç”Ÿæˆ<code>html</code>æ–‡ä»¶ã€‚<code>ViewResolver</code>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¦åšä¸¤ä»¶å¤§äº‹ï¼Œå³<code>ViewResolver</code>ä¼šæ‰¾åˆ°æ¸²æŸ“æ‰€ç”¨çš„æ¨¡æ¿(ä½¿ç”¨ä»€ä¹ˆæ¨¡æ¿æ¥æ¸²æŸ“?)å’Œæ‰€ç”¨ çš„æŠ€æœ¯(å…¶å®ä¹Ÿå°±æ˜¯è§†å›¾çš„ç±»å‹ï¼Œå¦‚ JSPç­‰)å¡«å…¥å‚æ•°ã€‚é»˜è®¤æƒ… å†µä¸‹ï¼ŒSpring MVC ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨é…ç½®ä¸€ä¸ª <code>InternalResourceViewResolver</code>ï¼Œè¿™ä¸ªæ˜¯é’ˆ å¯¹ JSP ç±»å‹è§†å›¾çš„ã€‚</p>
<h3 id="RequestToViewNameTranslator"><a href="#RequestToViewNameTranslator" class="headerlink" title="RequestToViewNameTranslator"></a>RequestToViewNameTranslator</h3><p>è¿™ä¸ªç»„ä»¶çš„ä½œç”¨ï¼Œåœ¨äºä»<code>Request</code>ä¸­è·å–<code>viewName</code>. å› ä¸º<code>ViewResolver</code>æ˜¯æ ¹æ®<code>ViewName</code>æŸ¥æ‰¾<code>View</code>, ä½†æœ‰çš„ <code>Handler</code>å¤„ç†å®Œæˆä¹‹åï¼Œæ²¡æœ‰è®¾ç½®<code>View</code>ä¹Ÿæ²¡æœ‰è®¾ç½®<code>ViewName</code>ï¼Œ ä¾¿è¦é€šè¿‡è¿™ä¸ªç»„ä»¶æ¥ä»<code>Request</code>ä¸­æŸ¥æ‰¾<code>viewName</code>ã€‚</p>
<h3 id="LocaleResolver"><a href="#LocaleResolver" class="headerlink" title="LocaleResolver"></a>LocaleResolver</h3><p>åœ¨ä¸Šé¢æˆ‘ä»¬æœ‰çœ‹åˆ°<code>ViewResolver</code>çš„<code>resolveViewName()</code>æ–¹æ³•ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚é‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°<code>Locale</code>æ˜¯ä»å“ªæ¥çš„å‘¢ï¼Œè¿™å°±æ˜¯<code>LocaleResolver</code>è¦åšçš„äº‹äº†ã€‚ <code>LocaleResolver</code>ç”¨äºä»<code>request</code>ä¸­è§£æå‡º<code>Locale</code>, åœ¨ä¸­å›½å¤§é™†åœ°åŒºï¼Œ<code>Locale</code>å½“ç„¶å°±ä¼šæ˜¯<code>zh-CN</code>ä¹‹ç±»ï¼Œ ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªåŒºåŸŸã€‚è¿™ä¸ªç±»ä¹Ÿæ˜¯<code>i18n</code>çš„åŸºç¡€ã€‚</p>
<h3 id="ThemeResolver"><a href="#ThemeResolver" class="headerlink" title="ThemeResolver"></a>ThemeResolver</h3><p>ä»åå­—ä¾¿å¯çœ‹å‡ºï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥è§£æä¸»é¢˜çš„ã€‚ä¸»é¢˜å°±æ˜¯æ ·å¼ï¼Œå›¾ç‰‡ä»¥åŠå®ƒä»¬æ‰€å½¢æˆçš„æ˜¾ç¤ºæ•ˆæœçš„é›†åˆã€‚</p>
<h3 id="MultipartResolver"><a href="#MultipartResolver" class="headerlink" title="MultipartResolver"></a>MultipartResolver</h3><p>å…¶å®è¿™æ˜¯ä¸€ä¸ªå¤§å®¶å¾ˆç†Ÿæ‚‰çš„ç»„ä»¶ï¼Œ<code>MultipartResolver</code>ç”¨äºå¤„ç†ä¸Šä¼ è¯·æ±‚ï¼Œé€šè¿‡å°†æ™®é€šçš„<code>Request</code>åŒ…è£…æˆ <code>MultipartHttpServletRequest</code>æ¥å®ç°ã€‚<code>MultipartHttpServletRequest</code>å¯ä»¥é€šè¿‡<code>getFile()</code>ç›´æ¥è·å¾—æ–‡ä»¶ï¼Œå¦‚æœæ˜¯å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œè¿˜å¯ä»¥é€šè¿‡è°ƒç”¨<code>getFileMap</code>å¾—åˆ°<code>Map</code>è¿™æ ·çš„ç»“æ„ã€‚<code>MultipartResolver</code>çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å°è£…æ™®é€š çš„<code>request</code>ï¼Œä½¿å…¶æ‹¥æœ‰å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ã€‚</p>
<h3 id="FlashMapManager"><a href="#FlashMapManager" class="headerlink" title="FlashMapManager"></a>FlashMapManager</h3><p><code>FlashMap</code>ç”¨äºé‡å®šå‘<code>Redirect</code>æ—¶çš„å‚æ•°æ•°æ®ä¼ é€’, åªéœ€è¦åœ¨<code>redirect</code>ä¹‹å‰ï¼Œå°†è¦ä¼ é€’çš„æ•°æ®å†™å…¥<code>request</code>(å¯ä»¥é€šè¿‡ <code>ServletRequestAttributes.getRequest()</code> è·å¾—) çš„å±æ€§<code>OUTPUT_FLASH_MAP_ATTRIBUTE</code>ä¸­ï¼Œè¿™æ ·åœ¨ <code>redirect</code>ä¹‹åçš„<code>handler</code>ä¸­ï¼ŒSpringå°±ä¼šè‡ªåŠ¨å°†å…¶è®¾ç½®åˆ°<code>Model</code>ä¸­ï¼Œåç»­å°±å¯ä»¥ç›´æ¥ä»<code>Model</code>ä¸­å–å¾—æ•°æ®äº†ã€‚è€Œ <code>FlashMapManager</code>å°±æ˜¯ç”¨æ¥ç®¡ç†<code>FlashMap</code>çš„ã€‚</p>
<h2 id="Spring-MVCæºç åˆ†æ"><a href="#Spring-MVCæºç åˆ†æ" class="headerlink" title="Spring MVCæºç åˆ†æ"></a>Spring MVCæºç åˆ†æ</h2><h3 id="åˆå§‹åŒ–é˜¶æ®µ"><a href="#åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="åˆå§‹åŒ–é˜¶æ®µ"></a>åˆå§‹åŒ–é˜¶æ®µ</h3><p>å¯¹äºSpring-MVCæ¥è¯´ï¼Œæœ€æ ¸å¿ƒçš„ç±»æ˜¯<code>DispatcherServlet</code>ï¼Œå®ƒè´Ÿè´£å°†è¯·æ±‚è½¬å‘ç»™å„ä¸ª<code>Controller</code>è¿›è¡Œå¤„ç†ã€‚ç±»å›¾å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/ioc/DispatcherServlet.png" alt="DispatcherServlet"></p>
<p>é€šè¿‡ç±»å›¾å¯ä»¥å‘ç°ï¼Œ<code>DispatcherServlet</code>å®é™…ä¸Šæœ€ç»ˆç»§æ‰¿äº†<code>HttpServlet</code>ï¼Œè€Œ<code>HttpServlet</code>æ˜¯webå®¹å™¨å¯åŠ¨çš„æ ¸å¿ƒç±»ï¼Œå®ƒæœ‰ä¸€ä¸ª<code>init()</code>æ–¹æ³•æ¥åšä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚åœ¨<code>HttpServletBean</code>é‡å†™äº†<code>init()</code>ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/ioc/HttpServletBean-init.png" alt="HttpServletBean-init"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>init()</code>æ–¹æ³•ä¸­ï¼ŒçœŸæ­£å®Œæˆåˆå§‹åŒ–å®¹å™¨åŠ¨ä½œçš„é€»è¾‘å…¶å®åœ¨<code>initServletBean()</code>æ–¹æ³•ä¸­ï¼Œè€Œè¯¥æ–¹æ³•çš„å…·ä½“å®ç°åœ¨å…¶å­ç±»<code>FrameworkServlet</code>ä¸­ã€‚<br><img data-src="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-initServletBean.png" alt="FrameworkServlet-initServletBean"></p>
<p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼ŒçœŸæ­£åˆå§‹åŒ–web IoCå®¹å™¨æ˜¯åœ¨<code>initWebApplicationContext()</code>æ–¹æ³•ä¸­å®ç°çš„ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-initWebApplicationContext.png" alt="FrameworkServlet-initWebApplicationContext"></p>
<p><img data-src="https://chentianming11.github.io/images/spring/ioc/FrameworkServlet-configureAndRefreshWebApplicationContext.png" alt="FrameworkServlet-configureAndRefreshWebApplicationContext"></p>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå»ºç«‹äº†çˆ¶å­å®¹å™¨çš„å…³è”å…³ç³»ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨äº†<code>configureAndRefreshWebApplicationContext(cwac)</code>æ–¹æ³•æ¥åˆå§‹åŒ–IoCå®¹å™¨ã€‚æ–¹æ³•æœ€ç»ˆè°ƒç”¨äº†<code>AbstractApplicationContext</code>çš„<code>refresh()</code>æ–¹æ³•ã€‚</p>
<blockquote>
<p>çˆ¶å®¹å™¨ï¼ˆRoot WebApplicationContextï¼‰ï¼šå¯¹ä¸‰å±‚æ¶æ„ä¸­çš„serviceå±‚ã€daoå±‚è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸šåŠ¡beanï¼Œæ•°æ®æº(DataSource)ç­‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé…ç½®æ–‡ä»¶çš„åç§°ä¸ºapplicationContext.xmlã€‚åœ¨webåº”ç”¨ä¸­ï¼Œå…¶ä¸€èˆ¬é€šè¿‡ContextLoaderListeneræ¥åŠ è½½ã€‚</p>
</blockquote>
<blockquote>
<p>å­å®¹å™¨ï¼ˆServlet WebApplicationContextï¼‰ï¼šå¯¹ä¸‰å±‚æ¶æ„ä¸­çš„webå±‚è¿›è¡Œé…ç½®ï¼Œå¦‚æ§åˆ¶å™¨(controller)ã€è§†å›¾è§£æå™¨(view resolvers)ç­‰ç›¸å…³çš„beanã€‚é€šè¿‡spring mvcä¸­æä¾›çš„DispatchServletæ¥åŠ è½½é…ç½®ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œé…ç½®æ–‡ä»¶çš„åç§°ä¸ºspring-servlet.xmlã€‚</p>
</blockquote>
<blockquote>
<p>æ›´å¤šçˆ¶å­å®¹å™¨ä»‹ç»å¯å‚è€ƒ<a href="https://www.cnblogs.com/grasp/p/11042580.html" target="_blank" rel="noopener">springå’Œspringmvcçˆ¶å­å®¹å™¨æ¦‚å¿µä»‹ç»</a>ã€‚</p>
</blockquote>
<p><img data-src="https://chentianming11.github.io/images/spring/ioc/AbstractApplicationContext-refresh.png" alt="AbstractApplicationContext-refresh"></p>
<p><img data-src="https://chentianming11.github.io/images/spring/ioc/AbstractApplicationContext-refresh2.png" alt="AbstractApplicationContext-refresh2"></p>
<p>IoCå®¹å™¨åˆå§‹åŒ–ä»¥åï¼Œæœ€åè°ƒç”¨äº† <code>DispatcherServlet</code>çš„<code>onRefresh()</code>æ–¹æ³•ï¼Œåœ¨<code>onRefresh()</code>æ–¹æ³•ä¸­åˆæ˜¯ç›´æ¥è°ƒç”¨ <code>initStrategies()</code>æ–¹æ³•åˆå§‹åŒ– SpringMVC çš„ä¹å¤§ç»„ä»¶ã€‚<br><img data-src="https://chentianming11.github.io/images/spring/ioc/DispatcherServlet-onRefresh.png" alt="DispatcherServlet-onRefresh"></p>
<h3 id="è¿è¡Œè°ƒç”¨é˜¶æ®µ"><a href="#è¿è¡Œè°ƒç”¨é˜¶æ®µ" class="headerlink" title="è¿è¡Œè°ƒç”¨é˜¶æ®µ"></a>è¿è¡Œè°ƒç”¨é˜¶æ®µ</h3><p>å½“å‰ç½®çš„åˆå§‹åŒ–å®Œæˆä¹‹åï¼ŒSpring MVCå°±å¯ä»¥æ¥å—å¹¶å¤„ç†è¯·æ±‚äº†ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä»å‘èµ·ä¸€ä¸ªè¯·æ±‚ä¸ºä¾‹ï¼Œè¯¦ç»†ä»‹ç»å…¶æ‰§è¡Œè¿‡ç¨‹ã€‚å¯¹äºSpring MVCè€Œè¨€ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šç»è¿‡<code>DispatcherServlet</code>çš„<code>doService()</code>æ–¹æ³•ã€‚è€Œ<code>doService()</code>ä¸­çš„æ ¸å¿ƒé€»è¾‘ç”± <code>doDispatch()</code>å®ç°ï¼Œæºä»£ç å¦‚ä¸‹:<br><img data-src="https://chentianming11.github.io/images/spring/mvc/DispatcherServlet-doDispatch.png" alt="DispatcherServlet-doDispatch"></p>
<p>ä»æºç å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚å¤„ç†çš„æ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨</li>
<li>è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨</li>
<li>æ‹¦æˆªå™¨å‰ç½®å¤„ç†</li>
<li>çœŸæ­£è°ƒç”¨å¤„ç†å™¨</li>
<li>æ‹¦æˆªå™¨åç½®å¤„ç†</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ­¥éª¤è¿›è¡Œåˆ†æã€‚</p>
<h4 id="ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨"><a href="#ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨" class="headerlink" title="ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨"></a>ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨</h4><p><code>getHandler(HttpServletRequest request)</code>æºç å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/mvc/DispatcherServlet-getHandler.png" alt="DispatcherServlet-getHandler"></p>
<p>ä»æºç å¯ä»¥çœ‹å‡ºï¼Œç›´æ¥éå†<code>handlerMappings</code>ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…ä¸­çš„<code>HandlerMapping</code>å¯¹è±¡ï¼Œå†ä»<code>HandlerMapping</code>å¯¹è±¡è·å–å¤„ç†å™¨ã€‚å› æ­¤é—®é¢˜çš„å…³é”®å°±æ˜¯<code>handlerMappings</code>æœ‰å“ªäº›ï¼Ÿå®ƒä»¬åœ¨å®ä¾‹åŒ–çš„æ—¶å€™åˆåšäº†å“ªäº›å‡†å¤‡ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µä¼šåˆå§‹åŒ–ä¹å¤§ç»„ä»¶ï¼Œå…¶ä¸­å°±æœ‰<code>HandlerMapping</code>ã€‚ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªæ—¶åˆ»ï¼Œ<code>handlerMappings</code>å‡†å¤‡å¥½äº†ã€‚<code>HandlerMapping</code>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šä¸ªå®ç°ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´å¸¸è§çš„æ˜¯<code>RequestMappingHandlerMapping</code>ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä»¥<code>RequestMappingHandlerMapping</code>ä¸ºä¾‹è¿›è¡Œåˆ†æï¼Œå…¶ç±»å›¾å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerMapping.png" alt="RequestMappingHandlerMapping"></p>
<p><code>RequestMappingHandlerMapping</code>æœ¬èº«ä¹Ÿæ˜¯Springå®¹å™¨çš„ä¸€ä¸ª<code>Bean</code>å®ä¾‹ã€‚ä»ç±»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå…¶æŠ½è±¡çˆ¶ç±»å®ç°äº†<code>AbstractHandlerMethodMapping</code>å®ç°äº†<code>InitializingBean</code>æ¥å£ï¼Œå› æ­¤å¯ä»¥è‚¯å®šåœ¨å®ƒçš„<code>afterPropertiesSet()</code>å®ç°ä¸­åšäº†ä¸€äº›åˆå§‹åŒ–å¤„ç†ã€‚<br><img data-src="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMethodMapping-initHandlerMethods.png" alt="AbstractHandlerMethodMapping-initHandlerMethods"></p>
<p>åœ¨<code>detectHandlerMethods(beanName)</code>æ–¹æ³•ä¸­å®ç°äº†æ£€æµ‹å¹¶æ³¨å†Œå¤„ç†å™¨æ–¹æ³•çš„æ–¹é€»è¾‘ã€‚åœ¨è¿™é‡Œï¼Œ<strong>å»ºç«‹äº†<code>url</code>å’Œ<code>handler</code>äººä»¥åŠ<code>method</code>çš„æ˜ å°„å…³ç³»</strong>ã€‚</p>
<p>ç»§ç»­å›åˆ°<code>HandlerMapping</code>ï¼Œåœ¨åŒ¹é…åˆ°<code>HandlerMapping</code>ï¼Œè°ƒç”¨äº†å®ƒçš„<code>getHandler()</code>æ–¹æ³•ï¼Œå…·ä½“å®ç°åœ¨å®ƒçš„æŠ½è±¡çˆ¶ç±»<code>AbstractHandlerMapping</code>ä¸­ï¼Œæºç å¦‚ä¸‹ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMapping-getHandler.png" alt="AbstractHandlerMapping-getHandler"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€å…³é”®çš„æ­¥éª¤æœ‰2ä¸ªï¼š</p>
<ol>
<li>ç¬¬ä¸€æ­¥æ˜¯æ ¹æ®<code>request</code>æŸ¥æ‰¾å‡ºå…·ä½“çš„<code>Handler</code>ï¼ˆè¿™é‡Œå®é™…ä¸Šæ˜¯æ–¹æ³•æ³•å¤„ç†å™¨ï¼‰ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚ç®€å•æ¥è¯´å°±æ˜¯æ ¹æ®urlæŸ¥æ‰¾å‰é¢æ³¨å†Œå¥½çš„<code>Method</code>å’Œ<code>Handler</code>(è¿™é‡Œæ˜¯æŒ‡<code>Controller</code>å®ä¾‹)ï¼Œå¹¶åŒ…è£…æˆ<code>HandlerMethod</code>è¿”å›ã€‚</li>
<li>ç¬¬äºŒæ­¥å°±æ˜¯æ ¹æ®<code>request</code>æŸ¥æ‰¾å¯¹åº”çš„æ‹¦æˆªå™¨å®ä¾‹ï¼Œå¹¶å°†å¤„ç†å™¨ã€æ‹¦æˆªå™¨åŒ…è£…æˆå¤„ç†å™¨æ‰§è¡Œé“¾<code>HandlerExecutionChain</code>è¿”å›ã€‚</li>
</ol>
<p><img data-src="https://chentianming11.github.io/images/spring/mvc/AbstractHandlerMapping-getHandlerExecutionChain.png" alt="AbstractHandlerMapping-getHandlerExecutionChain"></p>
<p><strong>è‡³æ­¤ï¼Œå·²ç»ç¡®å®šäº†å½“å‰è¯·æ±‚çš„å¤„ç†å™¨ï¼Œå®ƒåŒ…å«äº†æ–¹æ³•å¤„ç†å™¨ä»¥åŠæ‹¦æˆªå™¨é“¾</strong>ã€‚</p>
<h4 id="è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨"><a href="#è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨" class="headerlink" title="è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨"></a>è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨</h4><p>è·å–å¤„ç†<code>request</code>çš„å¤„ç†å™¨é€‚é…å™¨<code>handler adapter</code>ã€‚å¯¹äºæœ¬ä¾‹æ¥è¯´è·å–çš„æ˜¯<code>RequestMappingHandlerAdapter</code>ï¼Œä¸åšè¿‡å¤šèµ˜è¿°ã€‚</p>
<h4 id="æ‹¦æˆªå™¨å‰ç½®å¤„ç†"><a href="#æ‹¦æˆªå™¨å‰ç½®å¤„ç†" class="headerlink" title="æ‹¦æˆªå™¨å‰ç½®å¤„ç†"></a>æ‹¦æˆªå™¨å‰ç½®å¤„ç†</h4><p>æ‰§è¡Œæ‹¦æˆªå™¨<code>HandlerInterceptor</code>çš„å‰ç½®å¤„ç†æ–¹æ³•<code>preHandle()</code>ã€‚</p>
<h4 id="çœŸæ­£è°ƒç”¨å¤„ç†å™¨"><a href="#çœŸæ­£è°ƒç”¨å¤„ç†å™¨" class="headerlink" title="çœŸæ­£è°ƒç”¨å¤„ç†å™¨"></a>çœŸæ­£è°ƒç”¨å¤„ç†å™¨</h4><p>æ‰§è¡Œè°ƒç”¨é€‚é…å™¨<code>AbstractHandlerMethodAdapter</code>çš„<code>handle()</code>æ–¹æ³•ï¼Œè¿›è¡ŒçœŸæ­£çš„è°ƒç”¨é€»è¾‘å¤„ç†ï¼Œè¯¥æ–¹æ³•ç›´æ¥è°ƒç”¨äº†å­ç±»çš„<code>handleInternal()</code>æ–¹æ³•ã€‚<br><img data-src="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerAdapter-handleInternal.png" alt="RequestMappingHandlerAdapter-handleInternal"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€å…³é”®çš„æ˜¯è°ƒç”¨äº†<code>invokeHandlerMethod()</code>æ–¹æ³•ã€‚<br><img data-src="https://chentianming11.github.io/images/spring/mvc/RequestMappingHandlerAdapter-invokeHandlerMethod.png" alt="RequestMappingHandlerAdapter-invokeHandlerMethod"></p>
<p>åœ¨<code>invocableMethod.invokeAndHandle()</code>ä¸­å®Œæˆäº†<code>Request</code>ä¸­çš„å‚æ•°å’Œæ–¹æ³•å‚æ•°ä¸Šæ•°æ®çš„ç»‘å®šã€‚Spring MVCä¸­æä¾›ä¸¤ç§<code>Request</code>å‚æ•°åˆ°æ–¹æ³•ä¸­å‚æ•°çš„ç»‘å®šæ–¹å¼:é€šè¿‡æ³¨è§£<code>@RequestParam</code>è¿›è¡Œç»‘å®šã€é€šè¿‡å‚æ•°åç§°è¿›è¡Œç»‘å®šã€‚</p>
<p>ä½¿ç”¨æ³¨è§£è¿›è¡Œç»‘å®šï¼Œæˆ‘ä»¬åªè¦åœ¨æ–¹æ³•å‚æ•°å‰é¢å£°æ˜<code>@RequestParam(&quot;name&quot;)</code>ï¼Œå°±å¯ä»¥ å°†<code>request</code>ä¸­å‚æ•°<code>name</code>çš„å€¼ç»‘å®šåˆ°æ–¹æ³•çš„è¯¥å‚æ•°ä¸Šã€‚<strong>ä½¿ç”¨å‚æ•°åç§°è¿›è¡Œç»‘å®šçš„å‰ææ˜¯å¿…é¡»è¦è·å–æ–¹æ³•ä¸­å‚æ•°çš„åç§°</strong>ã€‚SpringåŸºäºASMæŠ€æœ¯å®ç°äº†è¿è¡Œæ—¶è·å–å‚æ•°çš„å®ç°ã€‚</p>
<p><img data-src="https://chentianming11.github.io/images/spring/mvc/ServletInvocableHandlerMethod-invokeAndHandle.png" alt="ServletInvocableHandlerMethod-invokeAndHandle"></p>
<p>åˆ°è¿™é‡Œ,æ–¹æ³•çš„å‚æ•°å€¼åˆ—è¡¨ä¹Ÿè·å–åˆ°äº†,æ–¹æ³•åå°„è°ƒç”¨ä¹Ÿç»“æŸäº†ï¼Œå¹¶ä¸”æ–¹æ³•è¿”å›å€¼ä¹Ÿæ‹¿åˆ°äº†ã€‚åé¢å°±éœ€è¦å¯¹è¿”å›ç»“æœè¿›è¡Œå¤„ç†äº†ï¼Œç»§ç»­è·Ÿè¿›<code>handleReturnValue()</code>æ–¹æ³•ï¼Œå¯¹äºå¸¸è§çš„<code>json</code>å“åº”ä½“è¿”å›ï¼Œå®é™…è°ƒç”¨äº†<code>RequestResponseBodyMethodProcessor</code>çš„å®ç°æ–¹æ³•ï¼š<br><img data-src="https://chentianming11.github.io/images/spring/mvc/RequestResponseBodyMethodProcessor-handleReturnValue.png" alt="RequestResponseBodyMethodProcessor-handleReturnValue"></p>
<p>è¿™é‡Œæ ¹æ®å®é™…çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼Œå°†æ–¹æ³•è¿”å›å€¼å†™å…¥åˆ°responseä¸­ï¼Œåœ¨æ‰§è¡Œå®Œåç»­æ“ä½œä¹‹åï¼Œç›´æ¥å°†ç»“æœè¾“å‡ºã€‚</p>
<h4 id="æ‹¦æˆªå™¨åç½®å¤„ç†"><a href="#æ‹¦æˆªå™¨åç½®å¤„ç†" class="headerlink" title="æ‹¦æˆªå™¨åç½®å¤„ç†"></a>æ‹¦æˆªå™¨åç½®å¤„ç†</h4><p>æ‰§è¡Œæ‹¦æˆªå™¨<code>HandlerInterceptor</code>çš„åç½®å¤„ç†æ–¹æ³•<code>postHandle()</code>ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»çš„æ¥è¯´ï¼ŒSpring MVCåšçš„äº‹æƒ…è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸»è¦ä¼šå»ºç«‹è¯·æ±‚urlä¸æ‰§è¡Œå®ä¾‹å’Œæ‰§è¡Œæ–¹æ³•çš„æ˜ å°„å…³ç³»ã€‚åœ¨è°ƒç”¨é˜¶æ®µï¼Œæ ¹æ®å‰é¢çš„æ˜ å°„å…³ç³»ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•æ‰§è¡Œï¼Œå¹¶å°†è¿”å›ç»“æœå†™å…¥<code>response</code>ä¸­ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è§£å†³å„ç§å¤æ‚æ€§çš„é—®é¢˜ï¼Œå¼•å…¥äº†éå¸¸çš„è®¾è®¡æ¥åº”å¯¹ã€‚ä½†æˆ‘ä»¬åªè¦ç†è§£å…¶æ ¸å¿ƒå®ç°å³å¯ï¼Œè¿‡äºç»†èŠ‚çš„å†…å®¹å¯ä»¥å…ˆä¸ç®¡ã€‚</p>
<blockquote>
<p>åŸåˆ›ä¸æ˜“ï¼Œè§‰å¾—æ–‡ç« å†™å¾—ä¸é”™çš„å°ä¼™ä¼´ï¼Œç‚¹ä¸ªèµğŸ‘ é¼“åŠ±ä¸€ä¸‹å§~</p>
</blockquote>
<blockquote>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å¼€æºé¡¹ç›®ï¼š<a href="https://github.com/LianjiaTech/retrofit-spring-boot-starter" target="_blank" rel="noopener">ä¸€æ¬¾é€‚ç”¨äºSpringBootçš„è½»é‡çº§HTTPè°ƒç”¨æ¡†æ¶</a></p>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/spring/" rel="tag"># spring</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/656110749/" rel="prev" title="ã€Springæºç é˜…è¯»ã€‘AOPå®ç°åŸç†">
      <i class="fa fa-chevron-left"></i> ã€Springæºç é˜…è¯»ã€‘AOPå®ç°åŸç†
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-MVCåŸºæœ¬æµç¨‹"><span class="nav-number">1.</span> <span class="nav-text">Spring MVCåŸºæœ¬æµç¨‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-MVCä¹å¤§ç»„ä»¶"><span class="nav-number">2.</span> <span class="nav-text">Spring MVCä¹å¤§ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HandlerMapping"><span class="nav-number">2.1.</span> <span class="nav-text">HandlerMapping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HandlerAdapter"><span class="nav-number">2.2.</span> <span class="nav-text">HandlerAdapter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HandlerExceptionResolver"><span class="nav-number">2.3.</span> <span class="nav-text">HandlerExceptionResolver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ViewResolver"><span class="nav-number">2.4.</span> <span class="nav-text">ViewResolver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RequestToViewNameTranslator"><span class="nav-number">2.5.</span> <span class="nav-text">RequestToViewNameTranslator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LocaleResolver"><span class="nav-number">2.6.</span> <span class="nav-text">LocaleResolver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThemeResolver"><span class="nav-number">2.7.</span> <span class="nav-text">ThemeResolver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MultipartResolver"><span class="nav-number">2.8.</span> <span class="nav-text">MultipartResolver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FlashMapManager"><span class="nav-number">2.9.</span> <span class="nav-text">FlashMapManager</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-MVCæºç åˆ†æ"><span class="nav-number">3.</span> <span class="nav-text">Spring MVCæºç åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#åˆå§‹åŒ–é˜¶æ®µ"><span class="nav-number">3.1.</span> <span class="nav-text">åˆå§‹åŒ–é˜¶æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿è¡Œè°ƒç”¨é˜¶æ®µ"><span class="nav-number">3.2.</span> <span class="nav-text">è¿è¡Œè°ƒç”¨é˜¶æ®µ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨"><span class="nav-number">3.2.1.</span> <span class="nav-text">ç¡®å®šå½“å‰è¯·æ±‚çš„å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨"><span class="nav-number">3.2.2.</span> <span class="nav-text">è·å–å½“å‰è¯·æ±‚çš„å¤„ç†é€‚é…å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‹¦æˆªå™¨å‰ç½®å¤„ç†"><span class="nav-number">3.2.3.</span> <span class="nav-text">æ‹¦æˆªå™¨å‰ç½®å¤„ç†</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#çœŸæ­£è°ƒç”¨å¤„ç†å™¨"><span class="nav-number">3.2.4.</span> <span class="nav-text">çœŸæ­£è°ƒç”¨å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‹¦æˆªå™¨åç½®å¤„ç†"><span class="nav-number">3.2.5.</span> <span class="nav-text">æ‹¦æˆªå™¨åç½®å¤„ç†</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">4.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="é™ˆæ·»æ˜"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">é™ˆæ·»æ˜</p>
  <div class="site-description" itemprop="description">ç”Ÿå‘½çš„æ„ä¹‰åœ¨äºæˆä¸ºä½ è‡ªå·±</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é™ˆæ·»æ˜</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">296k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">12:20</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://chentianming11.github.io/posts/3374948667/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'SoPxUkme2aynTULaNuIc5TIq-gzGzoHsz',
      appKey     : '4TDP7SMCbgDKTOGGUtpIeA0H',
      placeholder: "ç•™ä¸‹ç‚¹è¶³è¿¹å§~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
